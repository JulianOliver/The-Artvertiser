<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>bazar: /home/julian/devel/artvertiser/starter/image/mcv.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_dda6bb14f03450b8a577b3d18e5342c4.html">starter</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_6582c1bada1453facdee1bb828c86624.html">image</a>
  </div>
</div>
<div class="contents">
<h1>mcv.cpp</h1><a href="mcv_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">Copyright 2005, 2006 Computer Vision Lab, </span>
<a name="l00003"></a>00003 <span class="comment">Ecole Polytechnique Federale de Lausanne (EPFL), Switzerland. </span>
<a name="l00004"></a>00004 <span class="comment">All rights reserved.</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">This file is part of BazAR.</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">BazAR is free software; you can redistribute it and/or modify it under the</span>
<a name="l00009"></a>00009 <span class="comment">terms of the GNU General Public License as published by the Free Software</span>
<a name="l00010"></a>00010 <span class="comment">Foundation; either version 2 of the License, or (at your option) any later</span>
<a name="l00011"></a>00011 <span class="comment">version.</span>
<a name="l00012"></a>00012 <span class="comment"></span>
<a name="l00013"></a>00013 <span class="comment">BazAR is distributed in the hope that it will be useful, but WITHOUT ANY</span>
<a name="l00014"></a>00014 <span class="comment">WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A</span>
<a name="l00015"></a>00015 <span class="comment">PARTICULAR PURPOSE. See the GNU General Public License for more details.</span>
<a name="l00016"></a>00016 <span class="comment"></span>
<a name="l00017"></a>00017 <span class="comment">You should have received a copy of the GNU General Public License along with</span>
<a name="l00018"></a>00018 <span class="comment">BazAR; if not, write to the Free Software Foundation, Inc., 51 Franklin</span>
<a name="l00019"></a>00019 <span class="comment">Street, Fifth Floor, Boston, MA 02110-1301, USA </span>
<a name="l00020"></a>00020 <span class="comment">*/</span>
<a name="l00021"></a>00021 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#include &lt;cv.h&gt;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &lt;highgui.h&gt;</span>
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="preprocessor">#include "<a class="code" href="mcv_8h.html">mcv.h</a>"</span>
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="keyword">using namespace </span>std;
<a name="l00030"></a>00030 
<a name="l00032"></a>00032 
<a name="l00033"></a><a class="code" href="mcv_8h.html#9e8f66af9b7a48004d39e9cf6b1d65b8">00033</a> CvSize <a class="code" href="mcv_8cpp.html#9e8f66af9b7a48004d39e9cf6b1d65b8">mcvSize</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>)
<a name="l00034"></a>00034 {
<a name="l00035"></a>00035   <span class="keywordflow">return</span> cvSize(image-&gt;width, image-&gt;height);
<a name="l00036"></a>00036 }
<a name="l00037"></a>00037 
<a name="l00039"></a>00039 
<a name="l00040"></a><a class="code" href="mcv_8h.html#5bff58097cec858316ad4afab4949997">00040</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#5bff58097cec858316ad4afab4949997">mcvSmooth</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, IplImage * smoothed_image, <span class="keywordtype">int</span> smooth_type, <span class="keywordtype">int</span> aperture)
<a name="l00041"></a>00041 {
<a name="l00042"></a>00042   <span class="keywordflow">if</span> (smooth_type != CV_GAUSSIAN)
<a name="l00043"></a>00043   {
<a name="l00044"></a>00044     cerr &lt;&lt; <span class="stringliteral">"mcvSmooth: only for CV_GAUSSIAN"</span> &lt;&lt; endl;
<a name="l00045"></a>00045     <span class="keywordflow">return</span>;
<a name="l00046"></a>00046   }
<a name="l00047"></a>00047 
<a name="l00048"></a>00048   IplImage * image_to_smooth = image;
<a name="l00049"></a>00049   <span class="keywordflow">while</span>(aperture &gt; 0)
<a name="l00050"></a>00050   {
<a name="l00051"></a>00051     <span class="keywordflow">if</span> (aperture &gt;= 7)
<a name="l00052"></a>00052     {
<a name="l00053"></a>00053       cvSmooth(image_to_smooth, smoothed_image, CV_GAUSSIAN, 7);
<a name="l00054"></a>00054       image_to_smooth = smoothed_image;
<a name="l00055"></a>00055       aperture -= 7;
<a name="l00056"></a>00056     }
<a name="l00057"></a>00057     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (aperture &gt;= 5)
<a name="l00058"></a>00058     {
<a name="l00059"></a>00059       cvSmooth(image_to_smooth, smoothed_image, CV_GAUSSIAN, 5);
<a name="l00060"></a>00060       image_to_smooth = smoothed_image;
<a name="l00061"></a>00061       aperture -= 5;
<a name="l00062"></a>00062     }
<a name="l00063"></a>00063     <span class="keywordflow">else</span> <span class="comment">// if (aperture &gt;= 3)</span>
<a name="l00064"></a>00064     {
<a name="l00065"></a>00065       cvSmooth(image_to_smooth, smoothed_image, CV_GAUSSIAN, 3);
<a name="l00066"></a>00066       image_to_smooth = smoothed_image;
<a name="l00067"></a>00067       aperture -= 3;
<a name="l00068"></a>00068     }
<a name="l00069"></a>00069   }
<a name="l00070"></a>00070 }
<a name="l00071"></a>00071 
<a name="l00072"></a><a class="code" href="mcv_8h.html#1846dee42eef5c6c20e9031efa289bac">00072</a> <span class="keywordtype">float</span> <a class="code" href="mcv_8cpp.html#1846dee42eef5c6c20e9031efa289bac">mcvGaussianDerivative</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> order_x, <span class="keywordtype">int</span> order_y, <span class="keywordtype">float</span> sigma)
<a name="l00073"></a>00073 {
<a name="l00074"></a>00074   <span class="keywordtype">int</span> half_size = int(3 * sqrt(2.) * sigma + 0.5);
<a name="l00075"></a>00075 
<a name="l00076"></a>00076   <span class="keywordtype">float</span> result = 0;
<a name="l00077"></a>00077 
<a name="l00078"></a>00078   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = -half_size; i &lt;= +half_size; i++)
<a name="l00079"></a>00079     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = -half_size; j &lt;= +half_size; j++)
<a name="l00080"></a>00080     {
<a name="l00081"></a>00081       <span class="keywordtype">float</span> c = 0.;
<a name="l00082"></a>00082       <span class="keywordtype">float</span> e = exp(-(i*i+j*j) / (2 * sigma * sigma));
<a name="l00083"></a>00083 
<a name="l00084"></a>00084       <span class="keywordflow">if</span> (order_x == 2 &amp;&amp; order_y == 0)
<a name="l00085"></a>00085         c = (i * i / (sigma * sigma * sigma * sigma) - 1 / (sigma * sigma)) * e;
<a name="l00086"></a>00086       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (order_x == 0 &amp;&amp; order_y == 2)
<a name="l00087"></a>00087         c = (j * j / (sigma * sigma * sigma * sigma) - 1 / (sigma * sigma)) * e;
<a name="l00088"></a>00088       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (order_x == 1 &amp;&amp; order_y == 1)
<a name="l00089"></a>00089         c = i * j / (sigma * sigma * sigma * sigma) * e;
<a name="l00090"></a>00090       <span class="keywordflow">else</span>
<a name="l00091"></a>00091       {
<a name="l00092"></a>00092         c = -1;
<a name="l00093"></a>00093         cerr &lt;&lt; <span class="stringliteral">"error when calling mcvGaussianDerivative"</span> &lt;&lt; endl;
<a name="l00094"></a>00094       }
<a name="l00095"></a>00095 
<a name="l00096"></a>00096       <span class="keywordtype">int</span> nx = x + i, ny = y + j;
<a name="l00097"></a>00097       <span class="keywordflow">if</span> (nx &lt; 0 || nx &gt;= image-&gt;width || ny &lt; 0 || ny &gt;= image-&gt;height)
<a name="l00098"></a>00098         result += c * 128;
<a name="l00099"></a>00099       <span class="keywordflow">else</span>
<a name="l00100"></a>00100       {
<a name="l00101"></a>00101         <span class="keywordflow">if</span> (image-&gt;depth == <span class="keywordtype">int</span>(IPL_DEPTH_8U))
<a name="l00102"></a>00102           result += c * <a class="code" href="mcv_8h.html#25ec8406be22b9750f954f7f8de0a8a8">mcvGet2D</a>(image, nx, ny, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>);
<a name="l00103"></a>00103         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (image-&gt;depth == <span class="keywordtype">int</span>(IPL_DEPTH_16S))
<a name="l00104"></a>00104           result += c * <a class="code" href="mcv_8h.html#25ec8406be22b9750f954f7f8de0a8a8">mcvGet2D</a>(image, nx, ny, <span class="keywordtype">short</span>);
<a name="l00105"></a>00105         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (image-&gt;depth == <span class="keywordtype">int</span>(IPL_DEPTH_32F))
<a name="l00106"></a>00106           result += c * <a class="code" href="mcv_8h.html#25ec8406be22b9750f954f7f8de0a8a8">mcvGet2D</a>(image, nx, ny, <span class="keywordtype">float</span>);
<a name="l00107"></a>00107         <span class="keywordflow">else</span>
<a name="l00108"></a>00108           cerr &lt;&lt; <span class="stringliteral">"mcvGaussianDerivative: wrong image format."</span> &lt;&lt; endl;
<a name="l00109"></a>00109       }
<a name="l00110"></a>00110     }
<a name="l00111"></a>00111 
<a name="l00112"></a>00112   <span class="keywordflow">return</span> result;
<a name="l00113"></a>00113 }
<a name="l00114"></a>00114 
<a name="l00115"></a><a class="code" href="mcv_8h.html#4234c8f94fa62a8064ff7d2bdd6c9853">00115</a> IplImage * <a class="code" href="mcv_8cpp.html#4234c8f94fa62a8064ff7d2bdd6c9853">mcvGradientNorm2</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> aperture)
<a name="l00116"></a>00116 {
<a name="l00117"></a>00117   IplImage * image_32f = cvCreateImage(cvSize(image-&gt;width, image-&gt;height), IPL_DEPTH_32F, 1);
<a name="l00118"></a>00118   cvCvtScale(image, image_32f);
<a name="l00119"></a>00119 
<a name="l00120"></a>00120   IplImage * image_32f_x = cvCreateImage(cvSize(image-&gt;width, image-&gt;height), IPL_DEPTH_32F, 1);
<a name="l00121"></a>00121   IplImage * image_32f_y = cvCreateImage(cvSize(image-&gt;width, image-&gt;height), IPL_DEPTH_32F, 1);
<a name="l00122"></a>00122 
<a name="l00123"></a>00123   cvSobel(image_32f, image_32f_x, 1, 0, aperture);
<a name="l00124"></a>00124   cvSobel(image_32f, image_32f_y, 1, 0, aperture);
<a name="l00125"></a>00125 
<a name="l00126"></a>00126   IplImage * result_32f = cvCreateImage(cvSize(image-&gt;width, image-&gt;height), IPL_DEPTH_32F, 1);
<a name="l00127"></a>00127   cvMul(image_32f_x, image_32f_x, image_32f_x);
<a name="l00128"></a>00128   cvMul(image_32f_y, image_32f_y, image_32f_y);
<a name="l00129"></a>00129   cvAdd(image_32f_x, image_32f_y, result_32f);
<a name="l00130"></a>00130 
<a name="l00131"></a>00131   IplImage * result = cvCreateImage(cvSize(image-&gt;width, image-&gt;height), IPL_DEPTH_8U, 1);
<a name="l00132"></a>00132 
<a name="l00133"></a>00133   <a class="code" href="mcv_8cpp.html#c66570312727749bdb0fb32f7549872e">mcvScaleTo0_255</a>(result_32f, result);
<a name="l00134"></a>00134 
<a name="l00135"></a>00135   cvReleaseImage(&amp;image_32f);
<a name="l00136"></a>00136   cvReleaseImage(&amp;image_32f_x);
<a name="l00137"></a>00137   cvReleaseImage(&amp;image_32f_y);
<a name="l00138"></a>00138   cvReleaseImage(&amp;result_32f);
<a name="l00139"></a>00139 
<a name="l00140"></a>00140   <span class="keywordflow">return</span> result;
<a name="l00141"></a>00141 }
<a name="l00142"></a>00142 
<a name="l00143"></a><a class="code" href="mcv_8h.html#fac7259a60c7f0e55624f9da46a6ce36">00143</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#d12f9a048ffcb0fcf1ca8d3d9094bdcf">mcvSetBorder</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> border, <span class="keywordtype">int</span> value)
<a name="l00144"></a>00144 {
<a name="l00145"></a>00145   <span class="keywordflow">if</span> (image-&gt;depth == <span class="keywordtype">int</span>(IPL_DEPTH_16S))
<a name="l00146"></a>00146   {
<a name="l00147"></a>00147     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 0; y &lt; image-&gt;height; y++)
<a name="l00148"></a>00148       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 0; x &lt; image-&gt;width; x++)
<a name="l00149"></a>00149         <span class="keywordflow">if</span> (x &lt; border || y &lt; border || x &gt;= image-&gt;width - border || y &gt;= image-&gt;height - border)
<a name="l00150"></a>00150           <a class="code" href="mcv_8h.html#25ec8406be22b9750f954f7f8de0a8a8">mcvGet2D</a>(image, x, y, <span class="keywordtype">short</span>) = short(value);
<a name="l00151"></a>00151   }
<a name="l00152"></a>00152   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (image-&gt;depth == <span class="keywordtype">int</span>(IPL_DEPTH_32F))
<a name="l00153"></a>00153   {
<a name="l00154"></a>00154     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 0; y &lt; image-&gt;height; y++)
<a name="l00155"></a>00155       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 0; x &lt; image-&gt;width; x++)
<a name="l00156"></a>00156         <span class="keywordflow">if</span> (x &lt; border || y &lt; border || x &gt;= image-&gt;width - border || y &gt;= image-&gt;height - border)
<a name="l00157"></a>00157           <a class="code" href="mcv_8h.html#25ec8406be22b9750f954f7f8de0a8a8">mcvGet2D</a>(image, x, y, <span class="keywordtype">float</span>) = float(value);
<a name="l00158"></a>00158   }
<a name="l00159"></a>00159   <span class="keywordflow">else</span>
<a name="l00160"></a>00160     cerr &lt;&lt; <span class="stringliteral">"mcvSetBorder: wrong image format."</span> &lt;&lt; endl;
<a name="l00161"></a>00161 }
<a name="l00162"></a>00162 
<a name="l00163"></a><a class="code" href="mcv_8h.html#e02fedd95f8b8547acec91047bf06a20">00163</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#d12f9a048ffcb0fcf1ca8d3d9094bdcf">mcvSetBorder</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> border_size)
<a name="l00164"></a>00164 {
<a name="l00165"></a>00165   <span class="keywordflow">if</span> (image-&gt;depth != IPL_DEPTH_32F)
<a name="l00166"></a>00166   {
<a name="l00167"></a>00167     cerr &lt;&lt; <span class="stringliteral">"Error when calling mcvAddBorder: image should be 32F"</span> &lt;&lt; endl;
<a name="l00168"></a>00168     <span class="keywordflow">return</span>;
<a name="l00169"></a>00169   }
<a name="l00170"></a>00170 
<a name="l00171"></a>00171   <span class="keywordtype">double</span> sum = 0;
<a name="l00172"></a>00172   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="yape_8cpp.html#0240ac851181b84ac374872dc5434ee4">N</a> = 0;
<a name="l00173"></a>00173   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = border_size + 1; j &lt; image-&gt;height - border_size - 1; j++)
<a name="l00174"></a>00174   {
<a name="l00175"></a>00175     <span class="keywordtype">float</span> * row = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(image, j, <span class="keywordtype">float</span>);
<a name="l00176"></a>00176     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = border_size + 1; i &lt; image-&gt;width - border_size - 1; i++)
<a name="l00177"></a>00177     {
<a name="l00178"></a>00178       sum += double(row[i]);
<a name="l00179"></a>00179       N++;
<a name="l00180"></a>00180     }
<a name="l00181"></a>00181   }
<a name="l00182"></a>00182   <span class="keywordtype">float</span> mean = float(sum / <span class="keywordtype">double</span>(N));
<a name="l00183"></a>00183   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; image-&gt;height; j++)
<a name="l00184"></a>00184   {
<a name="l00185"></a>00185     <span class="keywordtype">float</span> * row = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(image, j, <span class="keywordtype">float</span>);
<a name="l00186"></a>00186     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; image-&gt;width; i++)
<a name="l00187"></a>00187     {
<a name="l00188"></a>00188       <span class="keywordflow">if</span> (i &lt;= border_size || i &gt;= image-&gt;width  - border_size - 1 ||
<a name="l00189"></a>00189           j &lt;= border_size || j &gt;= image-&gt;height - border_size - 1)
<a name="l00190"></a>00190         row[i] = mean;
<a name="l00191"></a>00191     }
<a name="l00192"></a>00192   }
<a name="l00193"></a>00193 }
<a name="l00194"></a>00194 
<a name="l00196"></a>00196 
<a name="l00197"></a><a class="code" href="mcv_8h.html#7f8ca54086745c3f1df2eb08bfe51348">00197</a> IplImage * <a class="code" href="mcv_8cpp.html#7f8ca54086745c3f1df2eb08bfe51348">mcvColorToGray</a>(IplImage * colorImage)
<a name="l00198"></a>00198 {
<a name="l00199"></a>00199   IplImage * result = cvCreateImage(cvSize(colorImage-&gt;width, colorImage-&gt;height), IPL_DEPTH_8U, 1);
<a name="l00200"></a>00200 
<a name="l00201"></a>00201   cvCvtColor(colorImage, result, CV_RGB2GRAY);
<a name="l00202"></a>00202 
<a name="l00203"></a>00203   <span class="keywordflow">return</span> result;
<a name="l00204"></a>00204 }
<a name="l00205"></a>00205 
<a name="l00206"></a><a class="code" href="mcv_8h.html#00daa6acc2cf7a4add70027464dde828">00206</a> IplImage * <a class="code" href="mcv_8cpp.html#00daa6acc2cf7a4add70027464dde828">mcvGrayToColor</a>(IplImage * grayImage)
<a name="l00207"></a>00207 {
<a name="l00208"></a>00208   IplImage * result = cvCreateImage(cvSize(grayImage-&gt;width, grayImage-&gt;height), IPL_DEPTH_8U, 3);
<a name="l00209"></a>00209 
<a name="l00210"></a>00210   <span class="keywordflow">if</span> (grayImage-&gt;depth == IPL_DEPTH_32F)
<a name="l00211"></a>00211     {
<a name="l00212"></a>00212       IplImage * tempImage;
<a name="l00213"></a>00213       
<a name="l00214"></a>00214       <span class="keywordtype">double</span> min = 255, max = 0;
<a name="l00215"></a>00215       CvPoint Pmin, Pmax;
<a name="l00216"></a>00216       cvMinMaxLoc(grayImage, &amp;min, &amp;max, &amp;Pmin, &amp;Pmax);
<a name="l00217"></a>00217       tempImage = cvCreateImage(cvSize(grayImage-&gt;width, grayImage-&gt;height), IPL_DEPTH_8U, 1);
<a name="l00218"></a>00218       cvConvertScale(grayImage, tempImage, 255. / (max - min), -min * 255 / (max - min));
<a name="l00219"></a>00219       cvCvtColor(tempImage, result, CV_GRAY2RGB);      
<a name="l00220"></a>00220       cvReleaseImage(&amp;tempImage);      
<a name="l00221"></a>00221     }
<a name="l00222"></a>00222   <span class="keywordflow">else</span>
<a name="l00223"></a>00223     cvCvtColor(grayImage, result, CV_GRAY2RGB);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225   <span class="keywordflow">return</span> result;
<a name="l00226"></a>00226 }
<a name="l00227"></a>00227 
<a name="l00228"></a><a class="code" href="mcv_8cpp.html#464e2ae9393254209760b9d2ddb7e9f5">00228</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#464e2ae9393254209760b9d2ddb7e9f5">mcvHSV2RGB</a>(<span class="keywordtype">float</span> H, <span class="keywordtype">float</span> <a class="code" href="yape_8cpp.html#f933676109efed7ab34cea71d748a517">S</a>, <span class="keywordtype">float</span> V, <span class="keywordtype">int</span> &amp; R, <span class="keywordtype">int</span> &amp; G, <span class="keywordtype">int</span> &amp; B)
<a name="l00229"></a>00229 {
<a name="l00230"></a>00230   <span class="keywordflow">if</span> (S == 0) <span class="comment">//HSV values = 0..1</span>
<a name="l00231"></a>00231   {
<a name="l00232"></a>00232     R = int( V * 255.f );
<a name="l00233"></a>00233     G = int( V * 255.f );
<a name="l00234"></a>00234     B = int( V * 255.f );
<a name="l00235"></a>00235   }
<a name="l00236"></a>00236   <span class="keywordflow">else</span>
<a name="l00237"></a>00237   {
<a name="l00238"></a>00238     <span class="keywordtype">float</span> var_h = H * 6;
<a name="l00239"></a>00239     <span class="keywordflow">if</span> ( var_h &gt;= 6 ) var_h -= 6; <span class="comment">// H must be &lt; 1</span>
<a name="l00240"></a>00240     <span class="keywordtype">int</span> var_i = int( var_h );
<a name="l00241"></a>00241     <span class="keywordtype">float</span> var_1 = V * ( 1 - S );
<a name="l00242"></a>00242     <span class="keywordtype">float</span> var_2 = V * ( 1 - S * ( var_h - var_i ) );
<a name="l00243"></a>00243     <span class="keywordtype">float</span> var_3 = V * ( 1 - S * ( 1 - ( var_h - var_i ) ) );
<a name="l00244"></a>00244 
<a name="l00245"></a>00245     <span class="keywordtype">float</span> var_r, var_g, var_b;
<a name="l00246"></a>00246     <span class="keywordflow">if</span>      ( var_i == 0 ) { var_r = V     ; var_g = var_3 ; var_b = var_1; }
<a name="l00247"></a>00247     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( var_i == 1 ) { var_r = var_2 ; var_g = V     ; var_b = var_1; }
<a name="l00248"></a>00248     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( var_i == 2 ) { var_r = var_1 ; var_g = V     ; var_b = var_3; }
<a name="l00249"></a>00249     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( var_i == 3 ) { var_r = var_1 ; var_g = var_2 ; var_b = V;     }
<a name="l00250"></a>00250     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( var_i == 4 ) { var_r = var_3 ; var_g = var_1 ; var_b = V;     }
<a name="l00251"></a>00251     <span class="keywordflow">else</span>                   { var_r = V     ; var_g = var_1 ; var_b = var_2; }
<a name="l00252"></a>00252 
<a name="l00253"></a>00253     R = int( var_r * 255.f ); <span class="comment">// RGB results =0..255</span>
<a name="l00254"></a>00254     G = int( var_g * 255.f );
<a name="l00255"></a>00255     B = int( var_b * 255.f );
<a name="l00256"></a>00256   }
<a name="l00257"></a>00257 }
<a name="l00258"></a>00258 
<a name="l00259"></a><a class="code" href="mcv_8cpp.html#d5923e918db677b7322ae06c31710644">00259</a> IplImage * <a class="code" href="mcv_8cpp.html#d5923e918db677b7322ae06c31710644">mcvFloatToHue</a>(IplImage * floatImage, <span class="keywordtype">int</span> curve_number)
<a name="l00260"></a>00260 {
<a name="l00261"></a>00261   <span class="keywordflow">if</span> (floatImage-&gt;depth != IPL_DEPTH_32F)
<a name="l00262"></a>00262     <span class="keywordflow">return</span> 0;
<a name="l00263"></a>00263 
<a name="l00264"></a>00264   IplImage * result = cvCreateImage(cvSize(floatImage-&gt;width, floatImage-&gt;height), 
<a name="l00265"></a>00265                                     IPL_DEPTH_8U, 3);
<a name="l00266"></a>00266   <span class="keywordtype">double</span> min = 255, max = 0;
<a name="l00267"></a>00267   CvPoint Pmin, Pmax;
<a name="l00268"></a>00268   cvMinMaxLoc(floatImage, &amp;min, &amp;max, &amp;Pmin, &amp;Pmax);
<a name="l00269"></a>00269 
<a name="l00270"></a>00270   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 0; y &lt; result-&gt;height; y++)
<a name="l00271"></a>00271   {
<a name="l00272"></a>00272     <span class="keywordtype">float</span> * row = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(floatImage, y, <span class="keywordtype">float</span>);
<a name="l00273"></a>00273     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * rowH = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(result, y, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>);
<a name="l00274"></a>00274     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 0; x &lt; result-&gt;width; x++)
<a name="l00275"></a>00275     {
<a name="l00276"></a>00276       <span class="keywordtype">bool</span> use_color = <span class="keyword">true</span>;
<a name="l00277"></a>00277       <span class="keywordflow">if</span> (x &lt; result-&gt;width - 1 &amp;&amp; y &lt; result-&gt;height - 1)
<a name="l00278"></a>00278       {
<a name="l00279"></a>00279         <span class="keywordtype">int</span> l1 = int( ((log(row[x]) - log(min)) / (log(max) - log(min))) * curve_number );
<a name="l00280"></a>00280         <span class="keywordtype">int</span> l2 = int( ((log(row[x + 1]) - log(min)) / (log(max) - log(min))) * curve_number );
<a name="l00281"></a>00281         <span class="keywordtype">int</span> l3 = int( ((log(row[x + floatImage-&gt;width]) - log(min)) / (log(max) - log(min))) * curve_number );
<a name="l00282"></a>00282         <span class="keywordflow">if</span> (l1 != l2 || l1 != l3) 
<a name="l00283"></a>00283           use_color = <span class="keyword">false</span>;
<a name="l00284"></a>00284       }
<a name="l00285"></a>00285 
<a name="l00286"></a>00286       <span class="keywordflow">if</span> (use_color)
<a name="l00287"></a>00287       {
<a name="l00288"></a>00288         <span class="keywordtype">int</span> r, g, b;
<a name="l00289"></a>00289         <a class="code" href="mcv_8cpp.html#464e2ae9393254209760b9d2ddb7e9f5">mcvHSV2RGB</a>(<span class="keywordtype">float</span>( (row[x] - min) / (max - min) ), 1.f, 1.f,  r, g, b);
<a name="l00290"></a>00290         rowH[3 * x]     = (<span class="keywordtype">unsigned</span> char)(r);
<a name="l00291"></a>00291         rowH[3 * x + 1] = (<span class="keywordtype">unsigned</span> char)(g);
<a name="l00292"></a>00292         rowH[3 * x + 2] = (<span class="keywordtype">unsigned</span> char)(b);
<a name="l00293"></a>00293       }
<a name="l00294"></a>00294       <span class="keywordflow">else</span>
<a name="l00295"></a>00295       {
<a name="l00296"></a>00296         rowH[3 * x]     = 0;
<a name="l00297"></a>00297         rowH[3 * x + 1] = 0;
<a name="l00298"></a>00298         rowH[3 * x + 2] = 0;
<a name="l00299"></a>00299       }
<a name="l00300"></a>00300     }
<a name="l00301"></a>00301   }
<a name="l00302"></a>00302 
<a name="l00303"></a>00303   <span class="keywordflow">return</span> result;
<a name="l00304"></a>00304 }
<a name="l00305"></a>00305 
<a name="l00306"></a><a class="code" href="mcv_8cpp.html#4391732b1bf9a1ddc761d1b5e1c19f13">00306</a> IplImage * <a class="code" href="mcv_8cpp.html#4391732b1bf9a1ddc761d1b5e1c19f13">mcvFloatToGray</a>(IplImage * floatImage, <span class="keywordtype">int</span> curve_number)
<a name="l00307"></a>00307 {
<a name="l00308"></a>00308   <span class="keywordflow">if</span> (floatImage-&gt;depth != IPL_DEPTH_32F)
<a name="l00309"></a>00309     <span class="keywordflow">return</span> 0;
<a name="l00310"></a>00310 
<a name="l00311"></a>00311   IplImage * result = cvCreateImage(cvSize(floatImage-&gt;width, floatImage-&gt;height), 
<a name="l00312"></a>00312                                     IPL_DEPTH_8U, 3);
<a name="l00313"></a>00313   <span class="keywordtype">double</span> min = 255, max = 0;
<a name="l00314"></a>00314   CvPoint Pmin, Pmax;
<a name="l00315"></a>00315   cvMinMaxLoc(floatImage, &amp;min, &amp;max, &amp;Pmin, &amp;Pmax);
<a name="l00316"></a>00316 
<a name="l00317"></a>00317   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 0; y &lt; result-&gt;height; y++)
<a name="l00318"></a>00318   {
<a name="l00319"></a>00319     <span class="keywordtype">float</span> * row = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(floatImage, y, <span class="keywordtype">float</span>);
<a name="l00320"></a>00320     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * rowH = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(result, y, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>);
<a name="l00321"></a>00321     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 0; x &lt; result-&gt;width; x++)
<a name="l00322"></a>00322     {
<a name="l00323"></a>00323       <span class="keywordtype">bool</span> use_gray = <span class="keyword">true</span>;
<a name="l00324"></a>00324       <span class="keywordflow">if</span> (x &lt; result-&gt;width - 1 &amp;&amp; y &lt; result-&gt;height - 1)
<a name="l00325"></a>00325       {
<a name="l00326"></a>00326         <span class="keywordtype">int</span> l1 = int( (row[x] - min) / (max - min) * curve_number );
<a name="l00327"></a>00327         <span class="keywordtype">int</span> l2 = int( (row[x + 1] - min) / (max - min) * curve_number );
<a name="l00328"></a>00328         <span class="keywordtype">int</span> l3 = int( (row[x + floatImage-&gt;width] - min) / (max - min) * curve_number );
<a name="l00329"></a>00329         <span class="keywordflow">if</span> (l1 != l2 || l1 != l3) 
<a name="l00330"></a>00330           use_gray = <span class="keyword">false</span>;
<a name="l00331"></a>00331       }
<a name="l00332"></a>00332 
<a name="l00333"></a>00333       <span class="keywordflow">if</span> (use_gray)
<a name="l00334"></a>00334       {
<a name="l00335"></a>00335         rowH[3 * x]     = (<span class="keywordtype">unsigned</span> char)( 255. * (row[x] - min) / (max - min) );
<a name="l00336"></a>00336         rowH[3 * x + 1] = (<span class="keywordtype">unsigned</span> char)( 255. * (row[x] - min) / (max - min) );
<a name="l00337"></a>00337         rowH[3 * x + 2] = (<span class="keywordtype">unsigned</span> char)( 255. * (row[x] - min) / (max - min) );
<a name="l00338"></a>00338       }
<a name="l00339"></a>00339       <span class="keywordflow">else</span>
<a name="l00340"></a>00340       {
<a name="l00341"></a>00341         rowH[3 * x]     = 0;
<a name="l00342"></a>00342         rowH[3 * x + 1] = 0;
<a name="l00343"></a>00343         rowH[3 * x + 2] = 255;
<a name="l00344"></a>00344       }
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346   }
<a name="l00347"></a>00347 
<a name="l00348"></a>00348   <span class="keywordflow">return</span> result;
<a name="l00349"></a>00349 }
<a name="l00350"></a>00350 
<a name="l00351"></a><a class="code" href="mcv_8h.html#abea83727b43b1f6bc9e57829e2c4f2a">00351</a> IplImage * <a class="code" href="mcv_8cpp.html#abea83727b43b1f6bc9e57829e2c4f2a">showLocalMinima</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>)
<a name="l00352"></a>00352 {
<a name="l00353"></a>00353   IplImage * result = <a class="code" href="mcv_8cpp.html#00daa6acc2cf7a4add70027464dde828">mcvGrayToColor</a>(image);
<a name="l00354"></a>00354 
<a name="l00355"></a>00355   <span class="keywordtype">int</span> dy = image-&gt;widthStep / <span class="keyword">sizeof</span>(float);
<a name="l00356"></a>00356 
<a name="l00357"></a>00357   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 1; y &lt; image-&gt;height - 1; y++)
<a name="l00358"></a>00358   {
<a name="l00359"></a>00359     <span class="keywordtype">float</span> * row = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(image, y, <span class="keywordtype">float</span>);
<a name="l00360"></a>00360     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * row_r = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(result, y, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>);
<a name="l00361"></a>00361     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 1; x &lt; image-&gt;width - 1; x++)
<a name="l00362"></a>00362     {
<a name="l00363"></a>00363       <span class="keywordflow">if</span> (row[x] &lt; row[x - 1] &amp;&amp; row[x] &lt; row[x + 1] &amp;&amp;
<a name="l00364"></a>00364         row[x] &lt; row[x - dy] &amp;&amp; row[x] &lt; row[x + dy] &amp;&amp; 
<a name="l00365"></a>00365         row[x] &lt; row[x - dy - 1] &amp;&amp; row[x] &lt; row[x + dy - 1] &amp;&amp;
<a name="l00366"></a>00366         row[x] &lt; row[x - dy + 1] &amp;&amp; row[x] &lt; row[x + dy + 1])
<a name="l00367"></a>00367       {
<a name="l00368"></a>00368         row_r[3 * x] = 0;
<a name="l00369"></a>00369         row_r[3 * x + 1] = 0;
<a name="l00370"></a>00370         row_r[3 * x + 2] = 255;
<a name="l00371"></a>00371       }
<a name="l00372"></a>00372     }
<a name="l00373"></a>00373   }
<a name="l00374"></a>00374 
<a name="l00375"></a>00375   <span class="keywordflow">return</span> result;
<a name="l00376"></a>00376 }
<a name="l00377"></a>00377 
<a name="l00378"></a><a class="code" href="mcv_8h.html#1915f406e703d66adf3aa2f212a47922">00378</a> IplImage * <a class="code" href="mcv_8cpp.html#1915f406e703d66adf3aa2f212a47922">showLocalMaxima</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>)
<a name="l00379"></a>00379 {
<a name="l00380"></a>00380   IplImage * result = <a class="code" href="mcv_8cpp.html#00daa6acc2cf7a4add70027464dde828">mcvGrayToColor</a>(image);
<a name="l00381"></a>00381 
<a name="l00382"></a>00382   <span class="keywordtype">int</span> dy = image-&gt;widthStep / <span class="keyword">sizeof</span>(float);
<a name="l00383"></a>00383 
<a name="l00384"></a>00384   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 1; y &lt; image-&gt;height - 1; y++)
<a name="l00385"></a>00385   {
<a name="l00386"></a>00386     <span class="keywordtype">float</span> * row = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(image, y, <span class="keywordtype">float</span>);
<a name="l00387"></a>00387     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * row_r = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(result, y, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>);
<a name="l00388"></a>00388     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 1; x &lt; image-&gt;width - 1; x++)
<a name="l00389"></a>00389     {
<a name="l00390"></a>00390       <span class="keywordflow">if</span> (row[x] &gt; row[x - 1] &amp;&amp; row[x] &gt; row[x + 1] &amp;&amp;
<a name="l00391"></a>00391           row[x] &gt; row[x - dy] &amp;&amp; row[x] &gt; row[x + dy] &amp;&amp; 
<a name="l00392"></a>00392           row[x] &gt; row[x - dy - 1] &amp;&amp; row[x] &gt; row[x + dy - 1] &amp;&amp; 
<a name="l00393"></a>00393           row[x] &gt; row[x - dy + 1] &amp;&amp; row[x] &gt; row[x + dy + 1])
<a name="l00394"></a>00394       {
<a name="l00395"></a>00395         row_r[3 * x] = 0;
<a name="l00396"></a>00396         row_r[3 * x + 1] = 0;
<a name="l00397"></a>00397         row_r[3 * x + 2] = 255;
<a name="l00398"></a>00398       }
<a name="l00399"></a>00399     }
<a name="l00400"></a>00400   }
<a name="l00401"></a>00401 
<a name="l00402"></a>00402   <span class="keywordflow">return</span> result;
<a name="l00403"></a>00403 }
<a name="l00404"></a>00404 
<a name="l00405"></a><a class="code" href="mcv_8h.html#5883e5896a60c906b31160678d051f07">00405</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#5883e5896a60c906b31160678d051f07">mcvSwapRandB</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>)
<a name="l00406"></a>00406 {
<a name="l00407"></a>00407   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l = 0; l &lt; image-&gt;height; l++)
<a name="l00408"></a>00408   {
<a name="l00409"></a>00409     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * line = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)image-&gt;imageData + l * image-&gt;widthStep;
<a name="l00410"></a>00410 
<a name="l00411"></a>00411     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; image-&gt;nChannels * image-&gt;width; c += 3)
<a name="l00412"></a>00412     {
<a name="l00413"></a>00413       <span class="keywordtype">char</span> r = line[c];
<a name="l00414"></a>00414       line[c] = line[c + 2];
<a name="l00415"></a>00415       line[c + 2] = r;
<a name="l00416"></a>00416     }
<a name="l00417"></a>00417   }
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00420"></a><a class="code" href="mcv_8h.html#c66570312727749bdb0fb32f7549872e">00420</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#c66570312727749bdb0fb32f7549872e">mcvScaleTo0_255</a>(IplImage * original, IplImage * scaled)
<a name="l00421"></a>00421 {
<a name="l00422"></a>00422   <span class="keywordtype">double</span> min = 255, max = 0;
<a name="l00423"></a>00423   CvPoint Pmin, Pmax;
<a name="l00424"></a>00424 
<a name="l00425"></a>00425   cvMinMaxLoc(original, &amp;min, &amp;max, &amp;Pmin, &amp;Pmax);
<a name="l00426"></a>00426   cvConvertScale(original, scaled, 255. / (max - min), -min * 255 / (max - min));
<a name="l00427"></a>00427 }
<a name="l00428"></a>00428 
<a name="l00430"></a>00430 
<a name="l00431"></a><a class="code" href="mcv_8h.html#b5e61b135805611c7c1dd4839ce2e9d5">00431</a> <span class="keywordtype">int</span> <a class="code" href="mcv_8cpp.html#c9dffb4820093e8353a009bc19b800a5">mcvSaveImage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * filename, IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">bool</span> verbose)
<a name="l00432"></a>00432 {
<a name="l00433"></a>00433   <span class="keywordflow">if</span> (verbose)
<a name="l00434"></a>00434     cout &lt;&lt; <span class="stringliteral">"(saving "</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">"..."</span> &lt;&lt; flush;
<a name="l00435"></a>00435 
<a name="l00436"></a>00436   <span class="keywordtype">int</span> result;
<a name="l00437"></a>00437 
<a name="l00438"></a>00438   <span class="keywordflow">if</span> (image-&gt;depth == IPL_DEPTH_8U)
<a name="l00439"></a>00439     result = cvSaveImage(filename, image);
<a name="l00440"></a>00440   <span class="keywordflow">else</span>
<a name="l00441"></a>00441   {
<a name="l00442"></a>00442     IplImage * tempImage;
<a name="l00443"></a>00443 
<a name="l00444"></a>00444     <span class="keywordtype">double</span> min = 255, max = 0;
<a name="l00445"></a>00445     CvPoint Pmin, Pmax;
<a name="l00446"></a>00446     cvMinMaxLoc(image, &amp;min, &amp;max, &amp;Pmin, &amp;Pmax);
<a name="l00447"></a>00447 
<a name="l00448"></a>00448     <span class="keywordflow">if</span> (verbose)
<a name="l00449"></a>00449       cout &lt;&lt; <span class="stringliteral">"["</span> &lt;&lt; min &lt;&lt; <span class="stringliteral">" : "</span> &lt;&lt; max &lt;&lt; <span class="stringliteral">"] "</span> &lt;&lt; flush;
<a name="l00450"></a>00450 
<a name="l00451"></a>00451     tempImage = cvCreateImage(cvSize(image-&gt;width, image-&gt;height), IPL_DEPTH_8U, 1);
<a name="l00452"></a>00452     cvConvertScale(image, tempImage, 255. / (max - min), -min * 255 / (max - min));
<a name="l00453"></a>00453 
<a name="l00454"></a>00454     result = cvSaveImage(filename, tempImage);
<a name="l00455"></a>00455 
<a name="l00456"></a>00456     cvReleaseImage(&amp;tempImage);
<a name="l00457"></a>00457   }
<a name="l00458"></a>00458 
<a name="l00459"></a>00459   <span class="keywordflow">if</span> (verbose &amp;&amp; !result)
<a name="l00460"></a>00460     cout &lt;&lt; <span class="stringliteral">"ERROR !"</span> &lt;&lt; endl;
<a name="l00461"></a>00461 
<a name="l00462"></a>00462   <span class="keywordflow">if</span> (verbose &amp;&amp; result)
<a name="l00463"></a>00463     cout &lt;&lt; <span class="stringliteral">"ok)"</span> &lt;&lt; endl;
<a name="l00464"></a>00464 
<a name="l00465"></a>00465   <span class="keywordflow">return</span> result;
<a name="l00466"></a>00466 }
<a name="l00467"></a>00467 
<a name="l00468"></a><a class="code" href="mcv_8h.html#2462adb03f9b4721016335d58df89c4c">00468</a> <span class="keywordtype">int</span> <a class="code" href="mcv_8cpp.html#c9dffb4820093e8353a009bc19b800a5">mcvSaveImage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * generic_filename, <span class="keywordtype">int</span> index, IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">bool</span> verbose)
<a name="l00469"></a>00469 {
<a name="l00470"></a>00470   <span class="keywordtype">char</span> filename[1000];
<a name="l00471"></a>00471 
<a name="l00472"></a>00472   sprintf(filename, generic_filename, index);
<a name="l00473"></a>00473 
<a name="l00474"></a>00474   <span class="keywordflow">return</span> <a class="code" href="mcv_8cpp.html#c9dffb4820093e8353a009bc19b800a5">mcvSaveImage</a>(filename, image, verbose);
<a name="l00475"></a>00475 }
<a name="l00476"></a>00476 
<a name="l00478"></a>00478 
<a name="l00479"></a><a class="code" href="mcv_8cpp.html#47d19d7ddbf35a8c32897b13c30b88f5">00479</a> IplImage * <a class="code" href="mcv_8cpp.html#47d19d7ddbf35a8c32897b13c30b88f5">mcvCreateSimilarImage</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>)
<a name="l00480"></a>00480 {
<a name="l00481"></a>00481   <span class="keywordflow">return</span> cvCreateImage(cvSize(image-&gt;width, image-&gt;height), image-&gt;depth, image-&gt;nChannels);
<a name="l00482"></a>00482 }
<a name="l00483"></a>00483 
<a name="l00484"></a><a class="code" href="mcv_8h.html#9c9409c6521bcaa0d28c5bb94732770e">00484</a> IplImage * <a class="code" href="mcv_8cpp.html#d1a0272d0885b56ea56ae094c60a336d">mcvLoadImage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * filename, <span class="keywordtype">int</span> code, <span class="keywordtype">bool</span> verbose)
<a name="l00485"></a>00485 {
<a name="l00486"></a>00486   <span class="keywordflow">if</span> (verbose)
<a name="l00487"></a>00487     cout &lt;&lt; <span class="stringliteral">"(loading "</span> &lt;&lt; filename &lt;&lt; <span class="stringliteral">"..."</span> &lt;&lt; flush;
<a name="l00488"></a>00488 
<a name="l00489"></a>00489   IplImage * result = cvLoadImage(filename, code);
<a name="l00490"></a>00490 
<a name="l00491"></a>00491   <span class="keywordflow">if</span> (verbose &amp;&amp; !result)
<a name="l00492"></a>00492     cout &lt;&lt; <span class="stringliteral">"ERROR !"</span> &lt;&lt; endl;
<a name="l00493"></a>00493 
<a name="l00494"></a>00494   <span class="keywordflow">if</span> (verbose &amp;&amp; result)
<a name="l00495"></a>00495     cout &lt;&lt; <span class="stringliteral">"ok)"</span> &lt;&lt; endl;
<a name="l00496"></a>00496 
<a name="l00497"></a>00497   <span class="keywordflow">return</span> result;
<a name="l00498"></a>00498 }
<a name="l00499"></a>00499 
<a name="l00500"></a><a class="code" href="mcv_8h.html#a26ecc5f5477057eb5dbcff19be96575">00500</a> IplImage * <a class="code" href="mcv_8cpp.html#d1a0272d0885b56ea56ae094c60a336d">mcvLoadImage</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * generic_filename, <span class="keywordtype">int</span> index, <span class="keywordtype">int</span> code, <span class="keywordtype">bool</span> verbose)
<a name="l00501"></a>00501 {
<a name="l00502"></a>00502   <span class="keywordtype">char</span> filename[1000];
<a name="l00503"></a>00503 
<a name="l00504"></a>00504   sprintf(filename, generic_filename, index);
<a name="l00505"></a>00505 
<a name="l00506"></a>00506   <span class="keywordflow">return</span> <a class="code" href="mcv_8cpp.html#d1a0272d0885b56ea56ae094c60a336d">mcvLoadImage</a>(filename, code, verbose);
<a name="l00507"></a>00507 }
<a name="l00508"></a>00508 
<a name="l00510"></a>00510 
<a name="l00511"></a><a class="code" href="mcv_8h.html#f7c9486e034b19a837cfc3b9b2bd47b2">00511</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#a9ee944c6c0400122e7d2fd6acd1a277">mcvSquare</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> size, CvScalar color, <span class="keywordtype">int</span> width)
<a name="l00512"></a>00512 {
<a name="l00513"></a>00513   cvLine(image, <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x - size / 2, y - size / 2), <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x + size / 2, y - size / 2), color, width);
<a name="l00514"></a>00514   cvLine(image, <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x + size / 2, y - size / 2), <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x + size / 2, y + size / 2), color, width);
<a name="l00515"></a>00515   cvLine(image, <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x + size / 2, y + size / 2), <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x - size / 2, y + size / 2), color, width);
<a name="l00516"></a>00516   cvLine(image, <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x - size / 2, y + size / 2), <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x - size / 2, y - size / 2), color, width);
<a name="l00517"></a>00517 }
<a name="l00518"></a>00518 
<a name="l00519"></a><a class="code" href="mcv_8cpp.html#640d076e9266f5950972496d1a2fb33f">00519</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#640d076e9266f5950972496d1a2fb33f">mcvX</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> size, CvScalar color, <span class="keywordtype">int</span> width)
<a name="l00520"></a>00520 {
<a name="l00521"></a>00521   cvLine(image, <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x - size / 2, y - size / 2), <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x + size / 2, y + size / 2), color, width);
<a name="l00522"></a>00522   cvLine(image, <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x + size / 2, y - size / 2), <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x - size / 2, y + size / 2), color, width);
<a name="l00523"></a>00523 }
<a name="l00524"></a>00524 
<a name="l00525"></a><a class="code" href="mcv_8h.html#4a1af0a5868827456da641fa7abfb2b1">00525</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#73b9939be5ccf895d9bcd8c7e55b2bf1">mcvCross</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> size, CvScalar color, <span class="keywordtype">int</span> width)
<a name="l00526"></a>00526 {
<a name="l00527"></a>00527   cvLine(image, <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x - size / 2, y), <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x + size / 2, y), color, width);
<a name="l00528"></a>00528   cvLine(image, <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x, y - size / 2), <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x, y + size / 2), color, width);
<a name="l00529"></a>00529 }
<a name="l00530"></a>00530 
<a name="l00531"></a><a class="code" href="mcv_8h.html#b24c76c60996b3d03aa6c1f9305a6eb3">00531</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#2b5ba662a3284fedbc92105794f119cc">mcvCircle</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> size, CvScalar color, <span class="keywordtype">int</span> thickness)
<a name="l00532"></a>00532 {
<a name="l00533"></a>00533   cvCircle(image, <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x, y), size / 2, color, thickness);
<a name="l00534"></a>00534 }
<a name="l00535"></a>00535 
<a name="l00536"></a><a class="code" href="mcv_8h.html#77217b8229069d78d8ef457502b2e2b6">00536</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#258d4dc2ab421fee002c8e11b8a69a38">mcvVisibleLine</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> x1, <span class="keywordtype">int</span> y1, <span class="keywordtype">int</span> x2, <span class="keywordtype">int</span> y2, <span class="keywordtype">int</span> thickness)
<a name="l00537"></a>00537 {
<a name="l00538"></a>00538   cvLine(image, <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x1, y1), <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x2, y2), cvScalar(0, 0, 0), thickness + 2);
<a name="l00539"></a>00539   cvLine(image, <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x1, y1), <a class="code" href="CamCalibration_8cpp.html#f772d257d4c3962a14a64b6b237f9e7c">cvPoint</a>(x2, y2), cvScalar(255, 255, 255), thickness);
<a name="l00540"></a>00540 }
<a name="l00541"></a>00541 
<a name="l00543"></a>00543 
<a name="l00544"></a><a class="code" href="mcv_8h.html#9ce16cf6cd071494ce7e39a05ded2dbd">00544</a> IplImage * <a class="code" href="mcv_8cpp.html#9ce16cf6cd071494ce7e39a05ded2dbd">mcvCreateRandomImage</a>(CvSize size, <span class="keywordtype">int</span> depth, <span class="keywordtype">int</span> nChannels)
<a name="l00545"></a>00545 {
<a name="l00546"></a>00546   IplImage * result = cvCreateImage(size, depth, nChannels);
<a name="l00547"></a>00547 
<a name="l00548"></a>00548   <span class="keywordflow">if</span> (nChannels == 1)
<a name="l00549"></a>00549     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l = 0; l &lt; size.height; l++)
<a name="l00550"></a>00550     {
<a name="l00551"></a>00551       <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * line = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)result-&gt;imageData + l * result-&gt;widthStep;
<a name="l00552"></a>00552       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; nChannels * size.width; c++)
<a name="l00553"></a>00553         line[c] = (<span class="keywordtype">unsigned</span> char)(<a class="code" href="general_8h.html#f552b260c401eb6d7803d3e7118ca6c4">rand</a>() % 256);
<a name="l00554"></a>00554     }
<a name="l00555"></a>00555   <span class="keywordflow">else</span>
<a name="l00556"></a>00556     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l = 0; l &lt; size.height; l++)
<a name="l00557"></a>00557     {
<a name="l00558"></a>00558       <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * line = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)result-&gt;imageData + l * result-&gt;widthStep;
<a name="l00559"></a>00559       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; nChannels * size.width; c += 3)
<a name="l00560"></a>00560         line[c] = line[c + 1] = line[c + 2] = (<span class="keywordtype">unsigned</span> char)(<a class="code" href="general_8h.html#f552b260c401eb6d7803d3e7118ca6c4">rand</a>() % 256);
<a name="l00561"></a>00561     }
<a name="l00562"></a>00562 
<a name="l00563"></a>00563   <span class="keywordflow">return</span> result;
<a name="l00564"></a>00564 }
<a name="l00565"></a>00565 
<a name="l00566"></a><a class="code" href="mcv_8h.html#25d046b3f4b3ad586d483067e3e14cfd">00566</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#25d046b3f4b3ad586d483067e3e14cfd">mcvReplace</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> old_value, <span class="keywordtype">int</span> new_value)
<a name="l00567"></a>00567 {
<a name="l00568"></a>00568   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l = 0; l &lt; image-&gt;height; l++)
<a name="l00569"></a>00569   {
<a name="l00570"></a>00570     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * line = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(image, l, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>);
<a name="l00571"></a>00571 
<a name="l00572"></a>00572     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; image-&gt;width; c++)
<a name="l00573"></a>00573       <span class="keywordflow">if</span> (<span class="keywordtype">int</span>(line[c]) == old_value)
<a name="l00574"></a>00574         line[c] = (<span class="keywordtype">unsigned</span> char)new_value;
<a name="l00575"></a>00575   }
<a name="l00576"></a>00576 }
<a name="l00577"></a>00577 
<a name="l00578"></a><a class="code" href="mcv_8h.html#5d372a5dc318b3bef52182b1d57ef37c">00578</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#5d372a5dc318b3bef52182b1d57ef37c">mcvReplaceByNoise</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> value)
<a name="l00579"></a>00579 {
<a name="l00580"></a>00580   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> l = 0; l &lt; image-&gt;height; l++)
<a name="l00581"></a>00581   {
<a name="l00582"></a>00582     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * line = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(image, l, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>);
<a name="l00583"></a>00583 
<a name="l00584"></a>00584     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> c = 0; c &lt; image-&gt;width; c++)
<a name="l00585"></a>00585       <span class="keywordflow">if</span> (<span class="keywordtype">int</span>(line[c]) == value)
<a name="l00586"></a>00586         line[c] = (<span class="keywordtype">unsigned</span> char)(<a class="code" href="general_8h.html#f552b260c401eb6d7803d3e7118ca6c4">rand</a>() % 256);
<a name="l00587"></a>00587   }
<a name="l00588"></a>00588 }
<a name="l00589"></a>00589 
<a name="l00590"></a><a class="code" href="mcv_8h.html#fdc8e32b3d1a2dc7dc52d0217e7a088c">00590</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#fdc8e32b3d1a2dc7dc52d0217e7a088c">mcvAddWhiteNoise</a>(<span class="keyword">const</span> IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keyword">const</span> <span class="keywordtype">int</span> minNoise, <span class="keyword">const</span> <span class="keywordtype">int</span> maxNoise)
<a name="l00591"></a>00591 {
<a name="l00592"></a>00592   <span class="keywordtype">int</span> deltaNoise = maxNoise - minNoise;
<a name="l00593"></a>00593 
<a name="l00594"></a>00594   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 0; y &lt; image-&gt;height; y++)
<a name="l00595"></a>00595   {
<a name="l00596"></a>00596     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * line = <a class="code" href="mcv_8h.html#0fad77499b9ee1fcca10cbcfdc5029c9">mcvRow</a>(image, y, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>);
<a name="l00597"></a>00597 
<a name="l00598"></a>00598     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 0; x &lt; image-&gt;width; x++)
<a name="l00599"></a>00599     {
<a name="l00600"></a>00600       <span class="keywordtype">int</span> p = line[x];
<a name="l00601"></a>00601       <span class="keywordtype">int</span> noise = <a class="code" href="general_8h.html#f552b260c401eb6d7803d3e7118ca6c4">rand</a>() % (2 * deltaNoise + 1) - deltaNoise;
<a name="l00602"></a>00602 
<a name="l00603"></a>00603       <span class="keywordflow">if</span> (noise &lt; 0) 
<a name="l00604"></a>00604         noise -= minNoise;
<a name="l00605"></a>00605       <span class="keywordflow">else</span>
<a name="l00606"></a>00606         noise += minNoise;
<a name="l00607"></a>00607 
<a name="l00608"></a>00608       p += noise;
<a name="l00609"></a>00609       <span class="keywordflow">if</span> (p &gt; 255) p = 255;
<a name="l00610"></a>00610       <span class="keywordflow">if</span> (p &lt; 0)   p = 0;
<a name="l00611"></a>00611 
<a name="l00612"></a>00612       line[x] = (<span class="keywordtype">unsigned</span> char)p;
<a name="l00613"></a>00613     }
<a name="l00614"></a>00614   }
<a name="l00615"></a>00615 }
<a name="l00616"></a>00616 
<a name="l00617"></a><a class="code" href="mcv_8h.html#da0cb54d9015ec70d95db409aad9155b">00617</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#fdc8e32b3d1a2dc7dc52d0217e7a088c">mcvAddWhiteNoise</a>(<span class="keyword">const</span> IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keyword">const</span> <span class="keywordtype">int</span> maxNoise)
<a name="l00618"></a>00618 {
<a name="l00619"></a>00619   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 0; y &lt; image-&gt;height; y++)
<a name="l00620"></a>00620   {
<a name="l00621"></a>00621     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * line = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(image-&gt;imageData + y * image-&gt;widthStep);
<a name="l00622"></a>00622 
<a name="l00623"></a>00623     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 0; x &lt; image-&gt;width; x++)
<a name="l00624"></a>00624     {
<a name="l00625"></a>00625       <span class="keywordtype">int</span> p = line[x];
<a name="l00626"></a>00626 
<a name="l00627"></a>00627       p += <a class="code" href="general_8h.html#f552b260c401eb6d7803d3e7118ca6c4">rand</a>() % (2 * maxNoise + 1) - maxNoise;
<a name="l00628"></a>00628 
<a name="l00629"></a>00629       <span class="keywordflow">if</span> (p &gt; 255) 
<a name="l00630"></a>00630         p = 255;
<a name="l00631"></a>00631       <span class="keywordflow">else</span> <span class="keywordflow">if</span> (p &lt; 0)
<a name="l00632"></a>00632         p = 0;
<a name="l00633"></a>00633 
<a name="l00634"></a>00634       line[x] = (<span class="keywordtype">unsigned</span> char)p;
<a name="l00635"></a>00635     }
<a name="l00636"></a>00636   }
<a name="l00637"></a>00637 }
<a name="l00638"></a>00638 
<a name="l00639"></a>00639 <span class="comment">// I -&gt; 255 * (I / 255) ^ gamma</span>
<a name="l00640"></a><a class="code" href="mcv_8h.html#179d2726a544e092ca16e3ac1906a23e">00640</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#179d2726a544e092ca16e3ac1906a23e">mcvChangeGamma</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">float</span> gamma)
<a name="l00641"></a>00641 {
<a name="l00642"></a>00642   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 0; y &lt; image-&gt;height; y++)
<a name="l00643"></a>00643   {
<a name="l00644"></a>00644     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * line = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(image-&gt;imageData + y * image-&gt;widthStep);
<a name="l00645"></a>00645 
<a name="l00646"></a>00646     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 0; x &lt; image-&gt;width; x++)
<a name="l00647"></a>00647     {
<a name="l00648"></a>00648       <span class="keywordtype">int</span> I = int(255 * pow(line[x] / 255.0f, gamma));
<a name="l00649"></a>00649       <span class="keywordflow">if</span> (I &lt; 0) I = 0;
<a name="l00650"></a>00650       <span class="keywordflow">if</span> (I &gt; 256) I = 255;
<a name="l00651"></a>00651       line[x] = (<span class="keywordtype">unsigned</span> char)I;
<a name="l00652"></a>00652     }
<a name="l00653"></a>00653   }
<a name="l00654"></a>00654 }
<a name="l00655"></a>00655 
<a name="l00657"></a>00657 
<a name="l00658"></a><a class="code" href="mcv_8h.html#7c7636e6eb0f89d25962c4816e40b60e">00658</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#7c7636e6eb0f89d25962c4816e40b60e">mcvCrop</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, IplImage * croppedImage)
<a name="l00659"></a>00659 {
<a name="l00660"></a>00660   IplROI * originalROI = image-&gt;roi;
<a name="l00661"></a>00661   <span class="keywordtype">int</span> width = croppedImage-&gt;width;
<a name="l00662"></a>00662   <span class="keywordtype">int</span> height = croppedImage-&gt;height;
<a name="l00663"></a>00663 
<a name="l00664"></a>00664   <span class="keywordflow">if</span> (x &lt; 0 || y &lt; 0) <span class="keywordflow">return</span>;
<a name="l00665"></a>00665   <span class="keywordflow">if</span> (x + width &gt;= image-&gt;width || y + height &gt;= image-&gt;height) <span class="keywordflow">return</span>;
<a name="l00666"></a>00666 
<a name="l00667"></a>00667   IplROI roi;
<a name="l00668"></a>00668 
<a name="l00669"></a>00669   roi.xOffset = x;
<a name="l00670"></a>00670   roi.yOffset = y;
<a name="l00671"></a>00671   roi.width = width;
<a name="l00672"></a>00672   roi.height = height;
<a name="l00673"></a>00673   roi.coi = 0;
<a name="l00674"></a>00674 
<a name="l00675"></a>00675   image-&gt;roi = &amp;roi;
<a name="l00676"></a>00676   cvCopy(image, croppedImage);
<a name="l00677"></a>00677   image-&gt;roi = originalROI;
<a name="l00678"></a>00678 }
<a name="l00679"></a>00679 
<a name="l00680"></a><a class="code" href="mcv_8h.html#1238f90249776b578717aa60fa16d44a">00680</a> IplImage * <a class="code" href="mcv_8cpp.html#7c7636e6eb0f89d25962c4816e40b60e">mcvCrop</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)
<a name="l00681"></a>00681 {
<a name="l00682"></a>00682   IplImage * result = cvCreateImage(cvSize(width, height), image-&gt;depth, image-&gt;nChannels);
<a name="l00683"></a>00683 
<a name="l00684"></a>00684   <a class="code" href="mcv_8cpp.html#7c7636e6eb0f89d25962c4816e40b60e">mcvCrop</a>(image, x, y, result);
<a name="l00685"></a>00685 
<a name="l00686"></a>00686   <span class="keywordflow">return</span> result;
<a name="l00687"></a>00687 }
<a name="l00688"></a>00688 
<a name="l00690"></a>00690 
<a name="l00691"></a><a class="code" href="mcv_8h.html#e50fbfb88ac897a0d0859fe7a46bc75b">00691</a> IplImage * <a class="code" href="mcv_8cpp.html#c7dfd381457295a2f710f17e5f0c7094">mcvResize</a>(IplImage * original_image, <span class="keywordtype">int</span> new_width, <span class="keywordtype">int</span> new_height)
<a name="l00692"></a>00692 {
<a name="l00693"></a>00693   <span class="keywordflow">if</span> (new_height &lt; 0)
<a name="l00694"></a>00694     new_height = int(<span class="keywordtype">float</span>(new_width * original_image-&gt;height) / original_image-&gt;width);
<a name="l00695"></a>00695   IplImage * result = cvCreateImage(cvSize(new_width, new_height), original_image-&gt;depth, original_image-&gt;nChannels);
<a name="l00696"></a>00696   cvResize(original_image, result, CV_INTER_LINEAR);
<a name="l00697"></a>00697   <span class="keywordflow">return</span> result;
<a name="l00698"></a>00698 }
<a name="l00699"></a>00699 
<a name="l00700"></a><a class="code" href="mcv_8h.html#f23bb711782718869767fdb5a9622fde">00700</a> IplImage * <a class="code" href="mcv_8cpp.html#f23bb711782718869767fdb5a9622fde">mcvZoom</a>(IplImage * source, <span class="keywordtype">int</span> xc, <span class="keywordtype">int</span> yc, <span class="keywordtype">float</span> zoom)
<a name="l00701"></a>00701 {
<a name="l00702"></a>00702   IplImage * temp = cvCreateImage(cvSize(<span class="keywordtype">int</span>(source-&gt;width * zoom), <span class="keywordtype">int</span>(source-&gt;height * zoom)), IPL_DEPTH_8U, 1);
<a name="l00703"></a>00703   IplImage * result = cvCreateImage(cvSize(source-&gt;width, source-&gt;height), IPL_DEPTH_8U, 1);
<a name="l00704"></a>00704 
<a name="l00705"></a>00705   cvResize(source, temp, CV_INTER_LINEAR);
<a name="l00706"></a>00706   CvRect roi;
<a name="l00707"></a>00707   <span class="keywordtype">int</span> nxc = int(xc * zoom);
<a name="l00708"></a>00708   <span class="keywordtype">int</span> nyc = int(yc * zoom);
<a name="l00709"></a>00709   roi = cvRect(nxc - source-&gt;width / 2, nyc - source-&gt;height / 2, source-&gt;width, source-&gt;height);
<a name="l00710"></a>00710   cvSetImageROI(temp, roi);
<a name="l00711"></a>00711   cvCopy(temp, result);
<a name="l00712"></a>00712   cvReleaseImage(&amp;temp);
<a name="l00713"></a>00713 
<a name="l00714"></a>00714   <span class="keywordflow">return</span> result;
<a name="l00715"></a>00715 }
<a name="l00716"></a>00716 
<a name="l00717"></a><a class="code" href="mcv_8h.html#55473aa12b368d6e00ae2bc3542c1b78">00717</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#55473aa12b368d6e00ae2bc3542c1b78">mcvPut</a>(IplImage * destImage, IplImage * imageToCopy, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l00718"></a>00718 {
<a name="l00719"></a>00719   IplROI roi;
<a name="l00720"></a>00720   roi.xOffset = x;
<a name="l00721"></a>00721   roi.yOffset = y;
<a name="l00722"></a>00722   roi.width = imageToCopy-&gt;width;
<a name="l00723"></a>00723   roi.height = imageToCopy-&gt;height;
<a name="l00724"></a>00724   roi.coi = 0;
<a name="l00725"></a>00725 
<a name="l00726"></a>00726   IplROI * tempRoi = destImage-&gt;roi;
<a name="l00727"></a>00727 
<a name="l00728"></a>00728   destImage-&gt;roi = &amp;roi;
<a name="l00729"></a>00729 
<a name="l00730"></a>00730   <span class="keywordflow">if</span> (imageToCopy-&gt;nChannels == 1 &amp;&amp; destImage-&gt;nChannels == 3)
<a name="l00731"></a>00731   {
<a name="l00732"></a>00732     IplImage * colorImageToCopy = <a class="code" href="mcv_8cpp.html#00daa6acc2cf7a4add70027464dde828">mcvGrayToColor</a>(imageToCopy);
<a name="l00733"></a>00733     cvCopy(colorImageToCopy, destImage);
<a name="l00734"></a>00734     cvReleaseImage(&amp;colorImageToCopy);
<a name="l00735"></a>00735   }
<a name="l00736"></a>00736   <span class="keywordflow">else</span>
<a name="l00737"></a>00737     cvCopy(imageToCopy, destImage);
<a name="l00738"></a>00738 
<a name="l00739"></a>00739   destImage-&gt;roi = tempRoi;
<a name="l00740"></a>00740 }
<a name="l00741"></a>00741 
<a name="l00742"></a><a class="code" href="mcv_8h.html#e973ee9c714c20d37ab43fe6c95f4662">00742</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#e973ee9c714c20d37ab43fe6c95f4662">mcvDeinterlace</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>)
<a name="l00743"></a>00743 {
<a name="l00744"></a>00744   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * line = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)(image-&gt;imageData + image-&gt;widthStep);
<a name="l00745"></a>00745   <span class="keywordtype">int</span> width = image-&gt;nChannels * image-&gt;width;
<a name="l00746"></a>00746 
<a name="l00747"></a>00747   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 1; y &lt; image-&gt;height; y += 2)
<a name="l00748"></a>00748   {
<a name="l00749"></a>00749     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * previous = line - image-&gt;widthStep;
<a name="l00750"></a>00750     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * next = line + image-&gt;widthStep;
<a name="l00751"></a>00751 
<a name="l00752"></a>00752     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 0; x &lt; width; x++)
<a name="l00753"></a>00753       line[x] = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)((int(previous[x]) + int(next[x])) &gt;&gt; 1);
<a name="l00754"></a>00754 
<a name="l00755"></a>00755     line += 2 * image-&gt;widthStep;
<a name="l00756"></a>00756   }
<a name="l00757"></a>00757 }
<a name="l00758"></a>00758 
<a name="l00760"></a>00760 
<a name="l00761"></a><a class="code" href="mcv_8h.html#5e29fc80f72b665c5b247ecb726f522f">00761</a> IplImage * <a class="code" href="mcv_8cpp.html#5e29fc80f72b665c5b247ecb726f522f">mcvGetPatch</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, <span class="keywordtype">int</span> u, <span class="keywordtype">int</span> v, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)
<a name="l00762"></a>00762 {
<a name="l00763"></a>00763   <span class="keywordflow">return</span> <a class="code" href="mcv_8cpp.html#7c7636e6eb0f89d25962c4816e40b60e">mcvCrop</a>(image, u - width / 2, v - height / 2, width, height);
<a name="l00764"></a>00764 }
<a name="l00765"></a>00765 
<a name="l00766"></a><a class="code" href="mcv_8h.html#2dcba0b434f7d2c13c0c1af7f0d4fc86">00766</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#5e29fc80f72b665c5b247ecb726f522f">mcvGetPatch</a>(IplImage * <a class="code" href="artvertiser_8cpp.html#50c401d9f2e3a164c7d3dceb70b18771">image</a>, IplImage * patch, <span class="keywordtype">int</span> u, <span class="keywordtype">int</span> v)
<a name="l00767"></a>00767 {
<a name="l00768"></a>00768   <a class="code" href="mcv_8cpp.html#7c7636e6eb0f89d25962c4816e40b60e">mcvCrop</a>(image, u - patch-&gt;width / 2, v - patch-&gt;height / 2, patch);
<a name="l00769"></a>00769 }
<a name="l00770"></a>00770 
<a name="l00771"></a><a class="code" href="mcv_8cpp.html#100d3ce0ae993f2bb01d7dc6aec75e35">00771</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#100d3ce0ae993f2bb01d7dc6aec75e35">imcvR3z</a>(<span class="keywordtype">double</span> Rz[3][3], <span class="keywordtype">double</span> angle)
<a name="l00772"></a>00772 {
<a name="l00773"></a>00773   Rz[0][0] = cos(angle); Rz[0][1] = -sin(angle); Rz[0][2] = 0.;
<a name="l00774"></a>00774   Rz[1][0] = sin(angle); Rz[1][1] =  cos(angle); Rz[1][2] = 0.;
<a name="l00775"></a>00775   Rz[2][0] = 0.;         Rz[2][1] =  0.;         Rz[2][2] = 1.;
<a name="l00776"></a>00776 }
<a name="l00777"></a>00777 
<a name="l00778"></a><a class="code" href="mcv_8cpp.html#22fcfe42b5541b23b9f6c29a4849da34">00778</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#22fcfe42b5541b23b9f6c29a4849da34">imcvDiag3</a>(<span class="keywordtype">double</span> D[3][3], <span class="keywordtype">double</span> d1, <span class="keywordtype">double</span> d2, <span class="keywordtype">double</span> d3)
<a name="l00779"></a>00779 {
<a name="l00780"></a>00780   D[0][0] = d1; D[0][1] = 0.; D[0][2] = 0.; 
<a name="l00781"></a>00781   D[1][0] = 0.; D[1][1] = d2; D[1][2] = 0.; 
<a name="l00782"></a>00782   D[2][0] = 0.; D[2][1] = 0.; D[2][2] = d3; 
<a name="l00783"></a>00783 }
<a name="l00784"></a>00784 
<a name="l00785"></a><a class="code" href="mcv_8cpp.html#411fb742e331147fb9cbf48075fc8d09">00785</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#411fb742e331147fb9cbf48075fc8d09">imcvTransl3</a>(<span class="keywordtype">double</span> T[3][3], <span class="keywordtype">double</span> tx, <span class="keywordtype">double</span> ty)
<a name="l00786"></a>00786 {
<a name="l00787"></a>00787   T[0][0] = 1.; T[0][1] = 0.; T[0][2] = tx; 
<a name="l00788"></a>00788   T[1][0] = 0.; T[1][1] = 1.; T[1][2] = ty; 
<a name="l00789"></a>00789   T[2][0] = 0.; T[2][1] = 0.; T[2][2] = 1.; 
<a name="l00790"></a>00790 }
<a name="l00791"></a>00791 
<a name="l00792"></a><a class="code" href="mcv_8cpp.html#3159b909d2cd43421452d51c7e1747d5">00792</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#3159b909d2cd43421452d51c7e1747d5">imcvMul_MN3</a>(<span class="keywordtype">double</span> A[3][3], <span class="keywordtype">double</span> B[3][3], <span class="keywordtype">double</span> AB[3][3])
<a name="l00793"></a>00793 {
<a name="l00794"></a>00794   <span class="keywordtype">double</span> copy[3][3];
<a name="l00795"></a>00795 
<a name="l00796"></a>00796   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)
<a name="l00797"></a>00797     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 3; j++)
<a name="l00798"></a>00798     {
<a name="l00799"></a>00799       copy[i][j] = 0.;
<a name="l00800"></a>00800       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k = 0; k &lt; 3; k++)
<a name="l00801"></a>00801         copy[i][j] += A[i][k] * B[k][j];
<a name="l00802"></a>00802     }
<a name="l00803"></a>00803   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)
<a name="l00804"></a>00804     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 3; j++)
<a name="l00805"></a>00805       AB[i][j] = copy[i][j];
<a name="l00806"></a>00806 }
<a name="l00807"></a>00807 
<a name="l00808"></a><a class="code" href="mcv_8cpp.html#1316b399ca69794327e047c19183ad78">00808</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#1316b399ca69794327e047c19183ad78">imcvMul_MNt3</a>(<span class="keywordtype">double</span> A[3][3], <span class="keywordtype">double</span> B[3][3], <span class="keywordtype">double</span> ABt[3][3])
<a name="l00809"></a>00809 {
<a name="l00810"></a>00810   <span class="keywordtype">double</span> copy[3][3];
<a name="l00811"></a>00811 
<a name="l00812"></a>00812   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)
<a name="l00813"></a>00813     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 3; j++)
<a name="l00814"></a>00814     {
<a name="l00815"></a>00815       copy[i][j] = 0.;
<a name="l00816"></a>00816       <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k = 0; k &lt; 3; k++)
<a name="l00817"></a>00817         copy[i][j] += A[i][k] * B[j][k];
<a name="l00818"></a>00818     }
<a name="l00819"></a>00819   <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; 3; i++)
<a name="l00820"></a>00820     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> j = 0; j &lt; 3; j++)
<a name="l00821"></a>00821       ABt[i][j] = copy[i][j];
<a name="l00822"></a>00822 }
<a name="l00823"></a>00823 
<a name="l00824"></a><a class="code" href="mcv_8cpp.html#0835b7498abb24fbafe6892cb21faa54">00824</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#0835b7498abb24fbafe6892cb21faa54">imcvMul_MNMt3</a>(<span class="keywordtype">double</span> M[3][3], <span class="keywordtype">double</span> <a class="code" href="yape_8cpp.html#0240ac851181b84ac374872dc5434ee4">N</a>[3][3], <span class="keywordtype">double</span> MNMt[3][3])
<a name="l00825"></a>00825 {
<a name="l00826"></a>00826   <span class="keywordtype">double</span> NMt[3][3];
<a name="l00827"></a>00827 
<a name="l00828"></a>00828   <a class="code" href="mcv_8cpp.html#1316b399ca69794327e047c19183ad78">imcvMul_MNt3</a>(N, M, NMt);
<a name="l00829"></a>00829   <a class="code" href="mcv_8cpp.html#3159b909d2cd43421452d51c7e1747d5">imcvMul_MN3</a>(M, NMt, MNMt);
<a name="l00830"></a>00830 }
<a name="l00831"></a>00831 
<a name="l00833"></a>00833 
<a name="l00834"></a>00834 <span class="comment">/* </span>
<a name="l00835"></a>00835 <span class="comment">cf Multiple view geometry, p. 19</span>
<a name="l00836"></a>00836 <span class="comment">A = T(tx, ty) R(theta) R(-phi) D(lambda1, lambda2) R(phi)</span>
<a name="l00837"></a>00837 <span class="comment"></span>
<a name="l00838"></a>00838 <span class="comment">!!! actually compute the inverse of A to be opencv complient </span>
<a name="l00839"></a>00839 <span class="comment">*/</span>
<a name="l00840"></a>00840 
<a name="l00841"></a><a class="code" href="mcv_8h.html#d5215d8e70e71df5d14782bc3598d102">00841</a> <span class="keywordtype">void</span> <a class="code" href="mcv_8cpp.html#d5215d8e70e71df5d14782bc3598d102">mcvComputeAffineTransfo</a>(<span class="keywordtype">float</span> * a, 
<a name="l00842"></a>00842                              <span class="keywordtype">int</span> u, <span class="keywordtype">int</span> v, 
<a name="l00843"></a>00843                              <span class="keywordtype">float</span> theta, <span class="keywordtype">float</span> phi, 
<a name="l00844"></a>00844                              <span class="keywordtype">float</span> lambda1, <span class="keywordtype">float</span> lambda2, 
<a name="l00845"></a>00845                              <span class="keywordtype">float</span> tx, <span class="keywordtype">float</span> ty)
<a name="l00846"></a>00846 {
<a name="l00847"></a>00847   <span class="keywordtype">double</span> K[3][3];
<a name="l00848"></a>00848   <span class="keywordtype">double</span> A[3][3];
<a name="l00849"></a>00849 
<a name="l00850"></a>00850   <a class="code" href="mcv_8cpp.html#411fb742e331147fb9cbf48075fc8d09">imcvTransl3</a>(A, -tx, -ty);
<a name="l00851"></a>00851   <a class="code" href="mcv_8cpp.html#100d3ce0ae993f2bb01d7dc6aec75e35">imcvR3z</a>(K, -theta);
<a name="l00852"></a>00852   <a class="code" href="mcv_8cpp.html#3159b909d2cd43421452d51c7e1747d5">imcvMul_MN3</a>(K, A, A);
<a name="l00853"></a>00853 
<a name="l00854"></a>00854   <a class="code" href="mcv_8cpp.html#100d3ce0ae993f2bb01d7dc6aec75e35">imcvR3z</a>(K, phi);
<a name="l00855"></a>00855   <a class="code" href="mcv_8cpp.html#3159b909d2cd43421452d51c7e1747d5">imcvMul_MN3</a>(K, A, A);
<a name="l00856"></a>00856 
<a name="l00857"></a>00857   <a class="code" href="mcv_8cpp.html#22fcfe42b5541b23b9f6c29a4849da34">imcvDiag3</a>(K, 1. / lambda1, 1. / lambda2, 1);
<a name="l00858"></a>00858   <a class="code" href="mcv_8cpp.html#3159b909d2cd43421452d51c7e1747d5">imcvMul_MN3</a>(K, A, A);
<a name="l00859"></a>00859 
<a name="l00860"></a>00860   <a class="code" href="mcv_8cpp.html#100d3ce0ae993f2bb01d7dc6aec75e35">imcvR3z</a>(K, -phi);
<a name="l00861"></a>00861   <a class="code" href="mcv_8cpp.html#3159b909d2cd43421452d51c7e1747d5">imcvMul_MN3</a>(K, A, A);
<a name="l00862"></a>00862 
<a name="l00863"></a>00863   a[0] = (float)A[0][0];
<a name="l00864"></a>00864   a[1] = (float)A[0][1];
<a name="l00865"></a>00865   a[2] = (float)u + (<span class="keywordtype">float</span>)A[0][2];
<a name="l00866"></a>00866   a[3] = (float)A[1][0];
<a name="l00867"></a>00867   a[4] = (float)A[1][1];
<a name="l00868"></a>00868   a[5] = (float)v + (<span class="keywordtype">float</span>)A[1][2];
<a name="l00869"></a>00869 }
<a name="l00870"></a>00870 
<a name="l00871"></a><a class="code" href="mcv_8h.html#956b2b2334346b98be12f3ea6cb3ed05">00871</a> CvScalar <a class="code" href="mcv_8cpp.html#316e2e1ff0ab13832d77795bcb026ffa">mcvRainbowColor</a>(<span class="keywordtype">int</span> index, <span class="keywordtype">float</span> coeff)
<a name="l00872"></a>00872 {
<a name="l00873"></a>00873   <span class="keywordflow">if</span> (index == -1)
<a name="l00874"></a>00874     index = <a class="code" href="general_8h.html#f552b260c401eb6d7803d3e7118ca6c4">rand</a>() % 6;
<a name="l00875"></a>00875   <span class="keywordflow">else</span>
<a name="l00876"></a>00876     index = index % 6;
<a name="l00877"></a>00877 
<a name="l00878"></a>00878   <span class="keywordflow">switch</span>(index)
<a name="l00879"></a>00879   {
<a name="l00880"></a>00880   <span class="keywordflow">case</span> 0: <span class="keywordflow">return</span> CV_RGB(255 * coeff, 0, 0);
<a name="l00881"></a>00881   <span class="keywordflow">case</span> 1: <span class="keywordflow">return</span> CV_RGB(0, 255 * coeff, 0);
<a name="l00882"></a>00882   <span class="keywordflow">case</span> 2: <span class="keywordflow">return</span> CV_RGB(0, 0, 255 * coeff);
<a name="l00883"></a>00883 
<a name="l00884"></a>00884   <span class="keywordflow">case</span> 3: <span class="keywordflow">return</span> CV_RGB(255 * coeff, 255 * coeff, 0);
<a name="l00885"></a>00885   <span class="keywordflow">case</span> 4: <span class="keywordflow">return</span> CV_RGB(0, 255 * coeff, 255 * coeff);
<a name="l00886"></a>00886   <span class="keywordflow">case</span> 5: <span class="keywordflow">return</span> CV_RGB(255 * coeff, 0, 255 * coeff);
<a name="l00887"></a>00887 
<a name="l00888"></a>00888   <span class="keywordflow">default</span>: <span class="keywordflow">return</span> CV_RGB(128, 128, 128);
<a name="l00889"></a>00889   }
<a name="l00890"></a>00890 }
<a name="l00891"></a>00891 
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Aug 17 16:17:17 2009 for bazar by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
