<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>bazar: /home/julian/devel/artvertiser/garfeild/calib/camera.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_1be09642b1728ac69a5f1a111e5847b4.html">garfeild</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_286043b3351fad96a251ea738bb3e48e.html">calib</a>
  </div>
</div>
<div class="contents">
<h1>camera.h</h1><a href="camera_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef _CAMERA_H</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define _CAMERA_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include "<a class="code" href="matvec_8h.html">matvec.h</a>"</span>
<a name="l00005"></a>00005 
<a name="l00025"></a><a class="code" href="classPerspectiveProjection.html">00025</a> <span class="keyword">class </span><a class="code" href="classPerspectiveProjection.html" title="This class represents a calibrated camera.The camera space is right-handed, i.e.:...">PerspectiveProjection</a> {
<a name="l00026"></a>00026 <span class="keyword">public</span>:
<a name="l00027"></a>00027         <a class="code" href="classPerspectiveProjection.html#e1ffd9a891c990ff65c902b96055e7f2">PerspectiveProjection</a>();
<a name="l00028"></a>00028         <a class="code" href="classPerspectiveProjection.html#e1ffd9a891c990ff65c902b96055e7f2">PerspectiveProjection</a>(<span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">double</span> <a class="code" href="classPerspectiveProjection.html#bc56a44204aad71e69d0326863cbb4d5">f</a>, <span class="keywordtype">double</span> <a class="code" href="classPerspectiveProjection.html#8c123230817496ccc387833b8ad16a04">g</a>, <span class="keywordtype">double</span> <a class="code" href="classPerspectiveProjection.html#d6f3b1c8225646ba3e6aa5fb72ec8b79">cx</a>, <span class="keywordtype">double</span>, <span class="keywordtype">double</span> <a class="code" href="classPerspectiveProjection.html#8660b88683d16a71fc6448758d8e7011">s</a>=0);
<a name="l00029"></a>00029         <span class="keywordtype">void</span> <span class="keyword">set</span>(<span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">double</span> f, <span class="keywordtype">double</span> g, <span class="keywordtype">double</span> cx , <span class="keywordtype">double</span> <a class="code" href="classPerspectiveProjection.html#248ed23638c8718fd5dd2a9e4561f8cf">cy</a>, <span class="keywordtype">double</span> <a class="code" href="classPerspectiveProjection.html#8660b88683d16a71fc6448758d8e7011">s</a>=0);
<a name="l00030"></a>00030 
<a name="l00031"></a>00031         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveProjection.html#50ab214278d3135cde01e8599fcf35fb">eyeToImage</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> eye[3], <span class="keywordtype">double</span> uv[2]) <span class="keyword">const</span>;
<a name="l00032"></a>00032         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveProjection.html#e9e36975b4f7755630bef7305023654e">imageToEye</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> uv[2], <span class="keywordtype">double</span> eye[3], <span class="keywordtype">double</span> w=0) <span class="keyword">const</span>;
<a name="l00033"></a>00033         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveProjection.html#e9e36975b4f7755630bef7305023654e">imageToEye</a>(<span class="keywordtype">double</span> u, <span class="keywordtype">double</span> v, <span class="keywordtype">double</span> eye[3], <span class="keywordtype">double</span> w=0) <span class="keyword">const</span>;
<a name="l00034"></a>00034 
<a name="l00035"></a>00035         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveProjection.html#aeaae9b676f31ec6aaae0f17507d72b3">setGlProjection</a>() <span class="keyword">const</span>;
<a name="l00036"></a>00036 
<a name="l00037"></a>00037         <span class="keywordtype">bool</span> <a class="code" href="classPerspectiveProjection.html#4da8bde92940140f89fd61a6a091d0c4">setPlanes</a>(<span class="keywordtype">double</span> near, <span class="keywordtype">double</span> far);
<a name="l00038"></a>00038 
<a name="l00039"></a>00039         <span class="keywordtype">bool</span> <a class="code" href="classPerspectiveProjection.html#31e24d28d0a727d5b8740d403525af0f">getUndistortMap</a>(CvMat *xmap, CvMat *ymap);
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="comment">//protected:</span>
<a name="l00042"></a>00042         <span class="comment">// intrinsic parameters</span>
<a name="l00043"></a><a class="code" href="classPerspectiveProjection.html#8660b88683d16a71fc6448758d8e7011">00043</a>         <span class="keywordtype">double</span> f, g, cx, <a class="code" href="classPerspectiveProjection.html#248ed23638c8718fd5dd2a9e4561f8cf">cy</a>, <a class="code" href="classPerspectiveProjection.html#8660b88683d16a71fc6448758d8e7011">s</a>;
<a name="l00044"></a><a class="code" href="classPerspectiveProjection.html#53a7f46c684cb65831ca66414d987927">00044</a>         <span class="keywordtype">double</span> <a class="code" href="classPerspectiveProjection.html#53a7f46c684cb65831ca66414d987927">distortion</a>;
<a name="l00045"></a><a class="code" href="classPerspectiveProjection.html#b2cdfbd65cdeca4b1096c278a35fe7bb">00045</a>         <a class="code" href="structMat3x3.html">Mat3x3</a> <a class="code" href="classPerspectiveProjection.html#b2cdfbd65cdeca4b1096c278a35fe7bb">eyeToImageMat</a>;
<a name="l00046"></a><a class="code" href="classPerspectiveProjection.html#b70570ffd735add84ede4fc7e26be967">00046</a>         <span class="keywordtype">int</span> <a class="code" href="classPerspectiveProjection.html#b70570ffd735add84ede4fc7e26be967">width</a>, <a class="code" href="classPerspectiveProjection.html#957def5a272b068663d4b1f2dfd12dbb">height</a>;
<a name="l00047"></a><a class="code" href="classPerspectiveProjection.html#e6019aab834930fd019589f0561f14fa">00047</a>         <span class="keywordtype">double</span> <a class="code" href="classPerspectiveProjection.html#b1673a03e13ef4f53f06965174645a60">farPlane</a>, <a class="code" href="classPerspectiveProjection.html#e6019aab834930fd019589f0561f14fa">nearPlane</a>;
<a name="l00048"></a>00048 
<a name="l00049"></a>00049         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveProjection.html#3681c72293c92b10e2f2b11d36cdb85f">cmpEyeToImageMat</a>();
<a name="l00050"></a>00050 
<a name="l00051"></a>00051         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveProjection.html#3f4f61277587bbd542252ab564d50205">flip</a>();
<a name="l00052"></a>00052 };
<a name="l00053"></a>00053 
<a name="l00056"></a><a class="code" href="classPerspectiveCamera.html">00056</a> <span class="keyword">class </span><a class="code" href="classPerspectiveCamera.html">PerspectiveCamera</a> : <span class="keyword">public</span> <a class="code" href="classPerspectiveProjection.html" title="This class represents a calibrated camera.The camera space is right-handed, i.e.:...">PerspectiveProjection</a> {
<a name="l00057"></a>00057 <span class="keyword">public</span>:
<a name="l00058"></a>00058         <a class="code" href="classPerspectiveCamera.html#cb393f263121c3afbed3aed890546a40">PerspectiveCamera</a>();
<a name="l00059"></a>00059 
<a name="l00060"></a>00060         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#44670a5c3de06d2e46ff8b5ea1106dbd">worldToImage</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> p[3], <span class="keywordtype">double</span> uvw[3]) <span class="keyword">const</span>;
<a name="l00061"></a>00061         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#44670a5c3de06d2e46ff8b5ea1106dbd">worldToImage</a>(<span class="keyword">const</span> <a class="code" href="structVec3.html">Vec3</a> &amp;p, <a class="code" href="structVec3.html">Vec3</a> &amp;uvw) <span class="keyword">const</span>;
<a name="l00062"></a>00062         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#0c5b88e09bc2b2a007f52388d63cce70">worldToEye</a>(<span class="keyword">const</span> <a class="code" href="structVec3.html">Vec3</a> &amp;src, <a class="code" href="structVec3.html">Vec3</a> &amp;dst) <span class="keyword">const</span>;
<a name="l00063"></a>00063         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#0c5b88e09bc2b2a007f52388d63cce70">worldToEye</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> src[3], <span class="keywordtype">double</span> dst[3]) <span class="keyword">const</span>;
<a name="l00064"></a>00064         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#01fa24d8aa847cfb22cc7dc1000c19c4">eyeToWorld</a>(<span class="keyword">const</span> <a class="code" href="structVec3.html">Vec3</a> &amp;uvw, <a class="code" href="structVec3.html">Vec3</a> &amp;w) <span class="keyword">const</span>;
<a name="l00065"></a>00065         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#5274d8bee5179a1f99df7669c7f8571c">imageToWorld</a>(<span class="keywordtype">double</span> u, <span class="keywordtype">double</span> v, <a class="code" href="structVec3.html">Vec3</a> &amp;w, <span class="keywordtype">double</span> z=0) <span class="keyword">const</span>;
<a name="l00066"></a>00066         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#88bdd7df6ac6999de1442be9637200ac">setGlModelView</a>() <span class="keyword">const</span>;
<a name="l00067"></a>00067         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#06bc2f1ba72024d9de573f277e329aae">setByTarget</a>(<span class="keyword">const</span> <a class="code" href="structVec3.html">Vec3</a> pos, <span class="keyword">const</span> <a class="code" href="structVec3.html">Vec3</a> target, <span class="keywordtype">double</span> roll);
<a name="l00068"></a>00068         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#2a93a7a1307473f88bd2f3bd4fc93112">loadTdir</a>(<span class="keyword">const</span> <span class="keywordtype">double</span> tdir[3][4], <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h);
<a name="l00069"></a>00069         <span class="keywordtype">bool</span> <a class="code" href="classPerspectiveCamera.html#2a93a7a1307473f88bd2f3bd4fc93112">loadTdir</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *tdir, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h);
<a name="l00070"></a>00070         <span class="keywordtype">bool</span> <a class="code" href="classPerspectiveCamera.html#2a93a7a1307473f88bd2f3bd4fc93112">loadTdir</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *tdir); <span class="comment">// width and height are estimated. Do not trust it!</span>
<a name="l00071"></a>00071         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#a04a95a9690f6adf01f08adc3a4b2fe2">clearExternalParams</a>();
<a name="l00072"></a>00072 
<a name="l00074"></a>00074         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#34158caf5175fda8a17f669cce2f274f" title="translate the camera relative to eye coordinates (z means &amp;quot;move forward&amp;quot;)...">translate</a>(<span class="keywordtype">double</span> dx, <span class="keywordtype">double</span> dy, <span class="keywordtype">double</span> dz);
<a name="l00075"></a>00075 
<a name="l00076"></a>00076         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#21f0b95dbf40387e96ce1da38a60a7a2">setWorldToEyeMat</a>(<span class="keyword">const</span> <a class="code" href="structMat3x4.html">Mat3x4</a> &amp;m);
<a name="l00077"></a><a class="code" href="classPerspectiveCamera.html#35a3804b02a46af24519a0429ea96a7c">00077</a>         <span class="keyword">const</span> <a class="code" href="structMat3x4.html">Mat3x4</a> &amp;<a class="code" href="classPerspectiveCamera.html#35a3804b02a46af24519a0429ea96a7c">getWorldToEyeMat</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classPerspectiveCamera.html#bffee6158f44d4ec394d6413e10c56d4">worldToEyeMat</a>; }
<a name="l00078"></a><a class="code" href="classPerspectiveCamera.html#fc8ab3ef5ff5946240861550fa0f3a5d">00078</a>         <span class="keyword">const</span> <a class="code" href="structMat3x4.html">Mat3x4</a> &amp;<a class="code" href="classPerspectiveCamera.html#fc8ab3ef5ff5946240861550fa0f3a5d">getEyeToWorldMat</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classPerspectiveCamera.html#47d980a6c1215470d3f54a50accdb9a9">eyeToWorldMat</a>; }
<a name="l00079"></a><a class="code" href="classPerspectiveCamera.html#43c7ec57fad0170ac1959155d181a657">00079</a>         <span class="keyword">const</span> <a class="code" href="structMat3x4.html">Mat3x4</a> &amp;<a class="code" href="classPerspectiveCamera.html#43c7ec57fad0170ac1959155d181a657">getWorldToImageMat</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classPerspectiveCamera.html#aed5f9f6bf597c5cf8a855801b46558a">worldToImageMat</a>; }
<a name="l00080"></a>00080 
<a name="l00081"></a>00081         <span class="keywordtype">void</span> <a class="code" href="classPerspectiveCamera.html#c43aed6ecc4e4dfdc95ed7bffbe6a267">cmpWorldToImageMat</a>();
<a name="l00082"></a>00082 
<a name="l00084"></a>00084         <span class="keywordtype">bool</span> <a class="code" href="classPerspectiveCamera.html#d7062eb3cfc384db11e2d51b104ab641" title="Save the camera in a tdir file. Returns true on success, false on failure.">saveTdir</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *file);
<a name="l00085"></a>00085 
<a name="l00086"></a>00086 <span class="keyword">protected</span>:
<a name="l00087"></a>00087         <span class="comment">// extrinsic parameters</span>
<a name="l00088"></a><a class="code" href="classPerspectiveCamera.html#bffee6158f44d4ec394d6413e10c56d4">00088</a>         <a class="code" href="structMat3x4.html">Mat3x4</a> <a class="code" href="classPerspectiveCamera.html#bffee6158f44d4ec394d6413e10c56d4">worldToEyeMat</a>;
<a name="l00089"></a><a class="code" href="classPerspectiveCamera.html#47d980a6c1215470d3f54a50accdb9a9">00089</a>         <a class="code" href="structMat3x4.html">Mat3x4</a> <a class="code" href="classPerspectiveCamera.html#47d980a6c1215470d3f54a50accdb9a9">eyeToWorldMat</a>;
<a name="l00090"></a><a class="code" href="classPerspectiveCamera.html#aed5f9f6bf597c5cf8a855801b46558a">00090</a>         <a class="code" href="structMat3x4.html">Mat3x4</a> <a class="code" href="classPerspectiveCamera.html#aed5f9f6bf597c5cf8a855801b46558a">worldToImageMat</a>;
<a name="l00091"></a>00091 };
<a name="l00092"></a>00092 
<a name="l00093"></a>00093 std::ostream&amp; <a class="code" href="camera_8cpp.html#159db881cfdf9c324d02a90cb4104008">operator &lt;&lt; </a>(std::ostream&amp; os, <span class="keyword">const</span> <a class="code" href="classPerspectiveProjection.html" title="This class represents a calibrated camera.The camera space is right-handed, i.e.:...">PerspectiveProjection</a> &amp;cam);
<a name="l00094"></a>00094 std::ostream&amp; <a class="code" href="camera_8cpp.html#159db881cfdf9c324d02a90cb4104008">operator &lt;&lt; </a>(std::ostream&amp; os, <span class="keyword">const</span> <a class="code" href="classPerspectiveCamera.html">PerspectiveCamera</a> &amp;cam);
<a name="l00095"></a>00095         
<a name="l00096"></a>00096 <span class="preprocessor">#endif</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Aug 17 16:17:17 2009 for bazar by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
